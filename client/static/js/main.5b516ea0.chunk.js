(this["webpackJsonpwork7-client"]=this["webpackJsonpwork7-client"]||[]).push([[0],{140:function(e,t,a){e.exports={header:"styles_header__2dQfB",title:"styles_title__3N7E-"}},145:function(e,t,a){e.exports={layout:"styles_layout__SeFd3",content:"styles_content__o67Yr"}},174:function(e,t,a){e.exports={loading:"styles_loading__32rGI",Gradient:"styles_Gradient__1eYmy"}},180:function(e,t,a){e.exports={sidebar:"styles_sidebar__VtPxY"}},189:function(e,t,a){e.exports={form:"styles_form__jnDsq"}},190:function(e,t,a){e.exports={form:"styles_form__2ZSSu"}},198:function(e,t,a){e.exports=a(382)},203:function(e,t,a){},381:function(e,t,a){},382:function(e,t,a){"use strict";a.r(t);var n,r,c,s,o,l,u,i=a(0),m=a.n(i),p=a(4),f=a.n(p),d=(a(203),a(8)),h=a.n(d),b=a(45),v=a(19),E=a(383),g=a(174),y=a.n(g),w=function(){return m.a.createElement("div",{className:y.a.loading},m.a.createElement("span",null,"Application is loading, please wait..."))},x=function(){return m.a.createElement(E.a.Footer,null,"Geekhub")},O=a(38),j=a(388),k=a(5),_=a(54),N=a(51),C=a(71),S=a(69),U=a(72),I=a(74),D=a(42),M=a(62),A=(a(158),a(11)),L=(a(193),a(177)),z=a.n(L),B=new(n=function(){function e(){Object(D.a)(this,e),Object(I.a)(this,"user",r,this),Object(I.a)(this,"setUser",c,this),Object(I.a)(this,"unserUser",s,this)}return Object(N.a)(e,[{key:"fullName",get:function(){return this.user?this.user.firstName+this.user.lastName:""}}]),e}(),r=Object(M.a)(n.prototype,"user",[A.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),c=Object(M.a)(n.prototype,"setUser",[A.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.user=t}}}),Object(M.a)(n.prototype,"fullName",[A.e],Object.getOwnPropertyDescriptor(n.prototype,"fullName"),n.prototype),s=Object(M.a)(n.prototype,"unserUser",[A.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.user=void 0}}}),n);Object(A.f)({enforceActions:"observed"});var G=z()({global:!0})((l=function e(){Object(D.a)(this,e),Object(I.a)(this,"user",u,this)},u=Object(M.a)(l.prototype,"user",[A.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B}}),o=l))||o,P=(new G,Object(i.createContext)(new G)),F=function(){var e=Object(i.useContext)(P);if(!e)throw new Error("You have forgot to use StoreProvider, shame on you.");return e},Y=function(e){var t=e.children,a=F();return m.a.createElement(P.Provider,{value:a},t)},H=a(140),J=a.n(H),R=j.a.Title,W=function(){var e=F().user.user;return m.a.createElement(E.a.Header,{className:J.a.header},m.a.createElement(O.a,{to:"/"},m.a.createElement(k.a,{type:"file-image"})," GeekHub"),e?m.a.createElement(R,{type:"warning",className:J.a.title,level:4},e.firstName):m.a.createElement(O.a,{to:"/login"},m.a.createElement(_.a,{type:"primary",icon:"info-circle"},"Login")))},q=a(390),Q=a(180),T=a.n(Q),V=function(){var e=F().user.user;return m.a.createElement(E.a.Sider,{collapsible:!0,className:T.a.sidebar},m.a.createElement(q.a,{theme:"dark",mode:"inline"},m.a.createElement(q.a.Item,null,m.a.createElement(O.a,{to:"/users"},"Users")),!!e&&m.a.createElement(q.a.SubMenu,{key:"sub1",title:m.a.createElement("span",null,m.a.createElement(k.a,{type:"user"}),m.a.createElement("span",null,"Admin"))},m.a.createElement(q.a.Item,{key:"3"},m.a.createElement(O.a,{to:"/admin/users"},"Users")))))},Z=a(26),$=Object(Z.a)(),K=a(385),X=a(384),ee=a(386),te=a(187),ae=a(52),ne=a(60),re=a(84),ce=a(389),se=a(387),oe=a(391),le=a(194),ue=a(182),ie=a.n(ue),me=a(111),pe=a.n(me),fe=ie.a.create({baseURL:"http://localhost:5000/",headers:pe.a.pickBy({Authorization:"Bearer "+localStorage.getItem("token")})}),de="/user";function he(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(fe.post(de,e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}function be(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.awrap(fe.get("".concat(de,"/info")));case 2:e=t.sent,B.setUser(e.data);case 4:case"end":return t.stop()}}))}function ve(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.awrap(fe.get(de));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))}function Ee(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.awrap(fe.get("".concat(de,"/statistic")));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))}function ge(e,t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(fe.patch("".concat(de,"/").concat(e),t));case 2:return a=n.sent,n.abrupt("return",a.data);case 4:case"end":return n.stop()}}))}function ye(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(fe.delete("".concat(de,"/").concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}function we(e,t){var a,n,r,c;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.a.awrap(fe.post("".concat(de,"/login?email=").concat(e,"&password=").concat(t)));case 2:a=s.sent,n=a.data,r=n.token,c=Object(le.a)(n,["token"]),localStorage.setItem("token",r),B.setUser(c),window.location.href="/";case 7:case"end":return s.stop()}}))}var xe=re.a.Option,Oe=function(e){var t=e.edit,a=e.open,n=e.onClose,r=e.loadUsers,c=Object(i.useState)(t||{}),s=Object(b.a)(c,2),o=s[0],l=s[1];function u(e){var t=e.target,a=t.name,n=t.value;l(Object(ne.a)({},o,Object(ae.a)({},a,n)))}return t&&t._id!==o._id&&l(t),!t&&o._id&&l({}),m.a.createElement(ce.a,{title:(t?"update ":"craete ")+"user",visible:a,onOk:function(){var e;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=X.a.loading({content:"Loading..."}),a.prev=1,!t){a.next=7;break}return a.next=5,h.a.awrap(ge(t._id,o));case 5:a.next=9;break;case 7:return a.next=9,h.a.awrap(he(o));case 9:return a.next=11,h.a.awrap(r());case 11:n(),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(1),K.a.error({message:a.t0.message||a.t0});case 17:return a.prev=17,e(),X.a.success("Success!"),a.finish(17);case 21:case"end":return a.stop()}}),null,null,[[1,14,17,21]])},onCancel:n},m.a.createElement(se.a,null,m.a.createElement(se.a.Item,null,m.a.createElement(oe.a,{name:"firstName",prefix:m.a.createElement(k.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"First name",value:o.firstName,onChange:u}),m.a.createElement(oe.a,{name:"lastName",prefix:m.a.createElement(k.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Last name",value:o.lastName,onChange:u}),m.a.createElement(oe.a,{name:"email",prefix:m.a.createElement(k.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email",value:o.email,onChange:u}),m.a.createElement(re.a,{value:o.role||"user",onChange:function(e){return l(Object(ne.a)({},o,{role:e}))}},m.a.createElement(xe,{value:"user"},"User"),m.a.createElement(xe,{value:"admin"},"Admin")))))},je=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(C.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,modal:{open:!1}},a.changeModal=function(e){var t=a.state.modal.open;a.setState({modal:{open:!t,user:e}})},a.deleteUser=function(e){return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.awrap(ye(e));case 3:a.loadData(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),K.a.error({message:t.t0.message});case 9:case"end":return t.stop()}}),null,null,[[0,6]])},a.loadData=function(){var e,t;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=X.a.loading({content:"Loading..."}),n.prev=1,n.next=4,h.a.awrap(ve());case 4:t=n.sent,a.setState({users:t,loading:!1}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),K.a.error({message:n.t0.message||n.t0});case 11:return n.prev=11,e(),n.finish(11);case 14:case"end":return n.stop()}}),null,null,[[1,8,11,14]])},a}return Object(U.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.users,n=t.modal;return m.a.createElement("div",null,m.a.createElement(_.a,{icon:"plus",type:"primary",onClick:function(){return e.changeModal()}},"Add User"),m.a.createElement(ee.a,{dataSource:a,renderItem:function(t){return m.a.createElement(ee.a.Item,{key:t._id,actions:[m.a.createElement(k.a,{type:"edit",onClick:function(){return e.changeModal(t)}}),m.a.createElement(k.a,{type:"delete",onClick:function(){return e.deleteUser(t._id)}})]},m.a.createElement(ee.a.Item.Meta,{title:m.a.createElement("p",null,t.fullName),description:t.email}))}},this.state.loading&&m.a.createElement(te.a,null)),m.a.createElement(Oe,{loadUsers:this.loadData,open:n.open,edit:n.user,onClose:function(){return e.changeModal()}}))}}]),t}(i.Component),ke=function(){return m.a.createElement(v.c,null,m.a.createElement(v.a,{path:"/admin/users",component:je}))},_e=a(189),Ne=a.n(_e),Ce=function(){var e=Object(i.useState)({}),t=Object(b.a)(e,2),a=t[0],n=t[1];function r(e){var t=e.target,r=t.name,c=t.value;n(Object(ne.a)({},a,Object(ae.a)({},r,c)))}return m.a.createElement(se.a,{className:Ne.a.form},m.a.createElement(se.a.Item,null,m.a.createElement(oe.a,{prefix:m.a.createElement(k.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username",name:"login",onChange:r})),m.a.createElement(se.a.Item,null,m.a.createElement(oe.a,{prefix:m.a.createElement(k.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",name:"password",placeholder:"Password",onChange:r})),m.a.createElement(se.a.Item,null,m.a.createElement(_.a,{block:!0,onClick:function(){var e,t;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=a.login,t=a.password,e&&t){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,h.a.awrap(we(e,t));case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(3),K.a.error({message:"Not valid credentionals"});case 11:case"end":return n.stop()}}),null,null,[[3,8]])}},"Login"),"Or ",m.a.createElement(O.a,{to:"/register"},"register now!")))},Se=a(190),Ue=a.n(Se),Ie=function(e){var t=Object(i.useState)({}),a=Object(b.a)(t,2),n=a[0],r=a[1],c=Object(i.useState)(!1),s=Object(b.a)(c,2),o=(s[0],s[1]);function l(e){var t=e.target,a=t.name,c=t.value;r(Object(ne.a)({},n,Object(ae.a)({},a,c)))}return m.a.createElement(se.a,{className:Ue.a.form},["firstName","lastName","email","password"].map((function(e){return m.a.createElement(se.a.Item,null,m.a.createElement(oe.a,{name:e,placeholder:pe.a.startCase(e),onChange:l}))})),m.a.createElement(se.a.Item,null,m.a.createElement(_.a,{block:!0,onClick:function(){o(!0);try{!function(e){var t;h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(fe.post("".concat(de,"/register"),e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}(n),e.history.push("/login")}catch(t){K.a.error({message:t.message})}finally{o(!1)}}},"Register"),"Or ",m.a.createElement(O.a,{to:"/login"},"Login!")))},De=a(83),Me=a.n(De),Ae=a(191),Le=function(e){var t=e.data,a=t.map((function(e){return e.day})),n=t.map((function(e){return e.count})),r=Me()().format("MMMM");return m.a.createElement(m.a.Fragment,null,m.a.createElement("h3",null,"Users statistic for ",r),m.a.createElement(Ae.Bar,{width:1e3,data:{labels:a,values:n},labels:"flavor",values:"price"}))},ze=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(C.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).state={},a.getData=function(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.awrap(Ee());case 3:e=t.sent,a.setState({graphData:e}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("e",t.t0),K.a.error({message:t.t0.message||t.t0});case 11:case"end":return t.stop()}}),null,null,[[0,7]])},a}return Object(U.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state.graphData;return e?m.a.createElement(Le,{data:e}):m.a.createElement(te.a,{size:"large"})}}]),t}(i.Component),Be=function(){return m.a.createElement(v.c,null,m.a.createElement(v.a,{path:"/login",component:Ce}),m.a.createElement(v.a,{path:"/register",component:Ie}),m.a.createElement(v.a,{path:"/users",component:ze}))},Ge=a(145),Pe=a.n(Ge);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(380),a(381);f.a.render(m.a.createElement((function(){var e=Object(i.useState)(!1),t=Object(b.a)(e,2),a=t[0],n=t[1],r=F().user;return Object(i.useEffect)((function(){h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.awrap(be());case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:return e.prev=8,n(!0),e.finish(8);case 11:case"end":return e.stop()}}),null,null,[[0,5,8,11]])}),[]),a?m.a.createElement(Y,null,m.a.createElement(v.b,{history:$},m.a.createElement(E.a,{className:Pe.a.layout},m.a.createElement(W,null),m.a.createElement(E.a,null,r&&m.a.createElement(V,null),m.a.createElement(E.a.Content,{className:Pe.a.content},m.a.createElement(v.c,null,m.a.createElement(v.a,{path:"/admin",component:ke}),m.a.createElement(v.a,{path:"/",component:Be})))),m.a.createElement(x,null)))):m.a.createElement(w,null)}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[198,1,2]]]);
//# sourceMappingURL=main.5b516ea0.chunk.js.map