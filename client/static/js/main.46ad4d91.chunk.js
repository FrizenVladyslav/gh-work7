(this["webpackJsonpwork7-client"]=this["webpackJsonpwork7-client"]||[]).push([[0],{149:function(e,t,a){e.exports={header:"styles_header__2dQfB",title:"styles_title__3N7E-"}},154:function(e,t,a){e.exports={container:"styles_container__1d7kt",form:"styles_form__uG72B"}},155:function(e,t,a){e.exports={layout:"styles_layout__SeFd3",content:"styles_content__o67Yr"}},203:function(e,t,a){e.exports={loading:"styles_loading__32rGI",Gradient:"styles_Gradient__1eYmy"}},209:function(e,t,a){e.exports={sidebar:"styles_sidebar__VtPxY"}},218:function(e,t,a){e.exports={btnGroup:"styles_btnGroup__1v8JK"}},222:function(e,t,a){e.exports={form:"styles_form__jnDsq"}},223:function(e,t,a){e.exports={form:"styles_form__2ZSSu"}},231:function(e,t,a){e.exports=a(458)},236:function(e,t,a){},457:function(e,t,a){},458:function(e,t,a){"use strict";a.r(t);var n,r,c,s,o,l,u,i=a(0),m=a.n(i),p=a(4),f=a.n(p),d=(a(236),a(6)),v=a.n(d),h=a(35),b=a(19),E=a(459),g=a(203),y=a.n(g),w=function(){return m.a.createElement("div",{className:y.a.loading},m.a.createElement("span",null,"Application is loading, please wait..."))},x=function(){return m.a.createElement(E.a.Footer,null,"Geekhub")},k=a(36),O=a(464),j=a(5),_=a(56),C=a(53),N=a(78),S=a(76),U=a(79),I=a(81),M=a(45),D=a(67),B=(a(168),a(13)),G=(a(228),a(206)),P=a.n(G),A=new(n=function(){function e(){Object(M.a)(this,e),Object(I.a)(this,"user",r,this),Object(I.a)(this,"setUser",c,this),Object(I.a)(this,"unserUser",s,this)}return Object(C.a)(e,[{key:"fullName",get:function(){return this.user?this.user.firstName+this.user.lastName:""}}]),e}(),r=Object(D.a)(n.prototype,"user",[B.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),c=Object(D.a)(n.prototype,"setUser",[B.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.user=t}}}),Object(D.a)(n.prototype,"fullName",[B.e],Object.getOwnPropertyDescriptor(n.prototype,"fullName"),n.prototype),s=Object(D.a)(n.prototype,"unserUser",[B.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.user=void 0}}}),n);Object(B.f)({enforceActions:"observed"});var L=P()({global:!0})((l=function e(){Object(M.a)(this,e),Object(I.a)(this,"user",u,this)},u=Object(D.a)(l.prototype,"user",[B.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A}}),o=l))||o,z=(new L,Object(i.createContext)(new L)),F=function(){var e=Object(i.useContext)(z);if(!e)throw new Error("You have forgot to use StoreProvider, shame on you.");return e},Y=function(e){var t=e.children,a=F();return m.a.createElement(z.Provider,{value:a},t)},H=a(149),J=a.n(H),T=O.a.Title,K=function(){var e=F().user.user;return m.a.createElement(E.a.Header,{className:J.a.header},m.a.createElement(k.a,{to:"/"},m.a.createElement(j.a,{type:"file-image"})," GeekHub"),e?m.a.createElement(T,{type:"warning",className:J.a.title,level:4},e.firstName):m.a.createElement(k.a,{to:"/login"},m.a.createElement(_.a,{type:"primary",icon:"info-circle"},"Login")))},R=a(467),W=a(469),$=a(209),q=a.n($),Q=function(){var e=F().user.user;return m.a.createElement(E.a.Sider,{collapsible:!0,className:q.a.sidebar},m.a.createElement(R.a,{theme:"dark",mode:"inline"},m.a.createElement(R.a.Item,null,m.a.createElement(k.a,{to:"/users"},"Users")),e&&m.a.createElement(R.a.Item,null,m.a.createElement(k.a,{to:"/balance"},"Balance",m.a.createElement(W.a,{count:e.balance,style:{backgroundColor:"#52c41a"}}))),!!e&&"admin"===e.role&&m.a.createElement(R.a.SubMenu,{key:"sub1",title:m.a.createElement("span",null,m.a.createElement(j.a,{type:"user"}),m.a.createElement("span",null,"Admin"))},m.a.createElement(R.a.Item,{key:"3"},m.a.createElement(k.a,{to:"/admin/users"},"Users")))))},V=a(28),Z=Object(V.a)(),X=a(461),ee=a(460),te=a(462),ae=a(463),ne=a(212),re=a(466),ce=a(470),se={style:{display:"none"}},oe=function(e){var t=e.open,a=e.data,n=e.onClose;return m.a.createElement(re.a,{visible:t,title:"Import data from a csv file...",okButtonProps:a?{onClick:n}:se,cancelButtonProps:se},a?m.a.createElement(ce.a,{message:"Done",description:"Users have been imported.",type:"info"}):m.a.createElement(ne.a,{tip:"Loading..."},m.a.createElement(ce.a,{message:"Please wait",description:"Users are importing.",type:"info"})))},le=a(54),ue=a(63),ie=a(95),me=a(465),pe=a(468),fe=a(226),de=a(214),ve=a.n(de),he=a(120),be=a.n(he),Ee="http://localhost:5000/",ge=ve.a.create({baseURL:Ee,headers:be.a.pickBy({Authorization:"Bearer "+localStorage.getItem("token")})}),ye="/user";function we(e){var t;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.awrap(ge.post(ye,e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}function xe(e){var t;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.awrap(ge.post("".concat(ye,"/bulk/").concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}function ke(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(ge.get("".concat(ye,"/info")));case 2:e=t.sent,A.setUser(e.data);case 4:case"end":return t.stop()}}))}function Oe(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(ge.get(ye));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))}function je(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.awrap(ge.get("".concat(ye,"/statistic")));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))}function _e(e,t){var a;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(ge.patch("".concat(ye,"/").concat(e),t));case 2:return a=n.sent,n.abrupt("return",a.data);case 4:case"end":return n.stop()}}))}function Ce(e){var t;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.awrap(ge.delete("".concat(ye,"/").concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}function Ne(e,t){var a,n,r,c;return v.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,v.a.awrap(ge.post("".concat(ye,"/login?email=").concat(e,"&password=").concat(t)));case 2:a=s.sent,n=a.data,r=n.token,c=Object(fe.a)(n,["token"]),localStorage.setItem("token",r),A.setUser(c),window.location.href="/";case 7:case"end":return s.stop()}}))}var Se=ie.a.Option,Ue=function(e){var t=e.edit,a=e.open,n=e.onClose,r=e.loadUsers,c=Object(i.useState)(t||{}),s=Object(h.a)(c,2),o=s[0],l=s[1];function u(e){var t=e.target,a=t.name,n=t.value;l(Object(ue.a)({},o,Object(le.a)({},a,n)))}return t&&t._id!==o._id&&l(t),!t&&o._id&&l({}),m.a.createElement(re.a,{title:(t?"update ":"craete ")+"user",visible:a,onOk:function(){var e;return v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=ee.a.loading({content:"Loading..."}),a.prev=1,!t){a.next=7;break}return a.next=5,v.a.awrap(_e(t._id,o));case 5:a.next=9;break;case 7:return a.next=9,v.a.awrap(we(o));case 9:return a.next=11,v.a.awrap(r());case 11:n(),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(1),X.a.error({message:a.t0.message||a.t0});case 17:return a.prev=17,e(),ee.a.success("Success!"),a.finish(17);case 21:case"end":return a.stop()}}),null,null,[[1,14,17,21]])},onCancel:n},m.a.createElement(me.a,null,m.a.createElement(me.a.Item,null,m.a.createElement(pe.a,{name:"firstName",prefix:m.a.createElement(j.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"First name",value:o.firstName,onChange:u}),m.a.createElement(pe.a,{name:"lastName",prefix:m.a.createElement(j.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Last name",value:o.lastName,onChange:u}),m.a.createElement(pe.a,{name:"email",prefix:m.a.createElement(j.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email",value:o.email,onChange:u}),m.a.createElement(ie.a,{value:o.role||"user",onChange:function(e){return l(Object(ue.a)({},o,{role:e}))}},m.a.createElement(Se,{value:"user"},"User"),m.a.createElement(Se,{value:"admin"},"Admin")))))},Ie=a(218),Me=a.n(Ie),De=function(e){function t(){var e,a;Object(M.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,modal:{open:!1},csvModal:{open:!1}},a.changeModal=function(e){var t=a.state.modal.open;a.setState({modal:{open:!t,user:e}})},a.changeCsvModal=function(e,t){a.setState({csvModal:{open:e,users:t}})},a.changeFile=function(e){var t,n,r,c;return v.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(console.log("info",e),t=e.file,n=t.status,r=t.response,"uploading"===n&&a.changeCsvModal(!0),"done"!==n||!r){s.next=17;break}return s.prev=4,s.next=7,v.a.awrap(xe(r));case 7:c=s.sent,a.changeCsvModal(!0,c),s.next=14;break;case 11:s.prev=11,s.t0=s.catch(4),X.a.error({message:s.t0.message});case 14:return s.prev=14,a.loadData(),s.finish(14);case 17:case"end":return s.stop()}}),null,null,[[4,11,14,17]])},a.deleteUser=function(e){return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.awrap(Ce(e));case 3:a.loadData(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),X.a.error({message:t.t0.message});case 9:case"end":return t.stop()}}),null,null,[[0,6]])},a.loadData=function(){var e,t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=ee.a.loading({content:"Loading..."}),n.prev=1,n.next=4,v.a.awrap(Oe());case 4:t=n.sent,a.setState({users:t,loading:!1}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),X.a.error({message:n.t0.message||n.t0});case 11:return n.prev=11,e(),n.finish(11);case 14:case"end":return n.stop()}}),null,null,[[1,8,11,14]])},a}return Object(U.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.users,n=t.modal,r=t.csvModal;return m.a.createElement("div",null,m.a.createElement("div",{className:Me.a.btnGroup},m.a.createElement(_.a,{icon:"plus",type:"primary",onClick:function(){return e.changeModal()}},"Add User"),m.a.createElement(te.a,{multiple:!1,name:"file",action:"".concat(Ee,"file"),accept:".csv",onChange:this.changeFile},m.a.createElement(_.a,{icon:"upload"},"Import csv"))),m.a.createElement(ae.a,{dataSource:a,renderItem:function(t){return m.a.createElement(ae.a.Item,{key:t._id,actions:[m.a.createElement(j.a,{type:"edit",onClick:function(){return e.changeModal(t)}}),m.a.createElement(j.a,{type:"delete",onClick:function(){return e.deleteUser(t._id)}})]},m.a.createElement(ae.a.Item.Meta,{title:m.a.createElement("p",null,t.fullName),description:t.email}))}},this.state.loading&&m.a.createElement(ne.a,null)),m.a.createElement(oe,{open:r.open,data:r.users,onClose:function(){return e.changeCsvModal(!1)}}),m.a.createElement(Ue,{loadUsers:this.loadData,open:n.open,edit:n.user,onClose:function(){return e.changeModal()}}))}}]),t}(i.Component),Be=function(){return m.a.createElement(b.c,null,m.a.createElement(b.a,{path:"/admin/users",component:De}))},Ge=a(69),Pe=a(221),Ae="/payment";function Le(e,t){var a;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.a.awrap(ge.post("".concat(Ae,"/pay"),{token:e,amount:t,returnUrl:window.origin}));case 2:return a=n.sent,n.abrupt("return",a.data);case 4:case"end":return n.stop()}}))}var ze=a(154),Fe=a.n(ze),Ye=function(){var e=Object(i.useState)(10),t=Object(h.a)(e,2),a=t[0],n=t[1],r=Object(Ge.useStripe)(),c=Object(Ge.useElements)(),s=function(e){var t,n,s;return v.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.preventDefault(),o.prev=1,r&&c){o.next=4;break}return o.abrupt("return");case 4:if(t=c.getElement(Ge.CardElement)){o.next=7;break}return o.abrupt("return");case 7:return o.next=9,v.a.awrap(r.createToken(t));case 9:if(n=o.sent,s=n.token){o.next=13;break}return o.abrupt("return");case 13:return o.next=15,v.a.awrap(Le(s.id,a));case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(1),X.a.error(o.t0.message);case 20:case"end":return o.stop()}}),null,null,[[1,17]])};return m.a.createElement(E.a,{className:Fe.a.container},m.a.createElement(me.a,{onSubmit:s,className:Fe.a.form},m.a.createElement(pe.a,{type:"number",placeholder:"Amount",value:a,onChange:function(e){var t=e.target;n(+t.value)}}),m.a.createElement(Ge.CardElement,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}}),m.a.createElement(_.a,{onClick:s,type:"primary",block:!0},"Pay $",a)))},He=a(222),Je=a.n(He),Te=function(){var e=Object(i.useState)({}),t=Object(h.a)(e,2),a=t[0],n=t[1];function r(e){var t=e.target,r=t.name,c=t.value;n(Object(ue.a)({},a,Object(le.a)({},r,c)))}return m.a.createElement(me.a,{className:Je.a.form},m.a.createElement(me.a.Item,null,m.a.createElement(pe.a,{prefix:m.a.createElement(j.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username",name:"login",onChange:r})),m.a.createElement(me.a.Item,null,m.a.createElement(pe.a,{prefix:m.a.createElement(j.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",name:"password",placeholder:"Password",onChange:r})),m.a.createElement(me.a.Item,null,m.a.createElement(_.a,{block:!0,onClick:function(){var e,t;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=a.login,t=a.password,e&&t){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,v.a.awrap(Ne(e,t));case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(3),X.a.error({message:"Not valid credentionals"});case 11:case"end":return n.stop()}}),null,null,[[3,8]])}},"Login"),"Or ",m.a.createElement(k.a,{to:"/register"},"register now!")))},Ke=a(223),Re=a.n(Ke),We=function(e){var t=Object(i.useState)({}),a=Object(h.a)(t,2),n=a[0],r=a[1],c=Object(i.useState)(!1),s=Object(h.a)(c,2),o=(s[0],s[1]);function l(e){var t=e.target,a=t.name,c=t.value;r(Object(ue.a)({},n,Object(le.a)({},a,c)))}return m.a.createElement(me.a,{className:Re.a.form},["firstName","lastName","email","password"].map((function(e){return m.a.createElement(me.a.Item,null,m.a.createElement(pe.a,{name:e,placeholder:be.a.startCase(e),onChange:l}))})),m.a.createElement(me.a.Item,null,m.a.createElement(_.a,{block:!0,onClick:function(){o(!0);try{!function(e){var t;v.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.awrap(ge.post("".concat(ye,"/register"),e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}(n),e.history.push("/login")}catch(t){X.a.error({message:t.message})}finally{o(!1)}}},"Register"),"Or ",m.a.createElement(k.a,{to:"/login"},"Login!")))},$e=a(93),qe=a.n($e),Qe=a(224),Ve=function(e){var t=e.data,a=t.map((function(e){return e.day})),n=t.map((function(e){return e.count})),r=qe()().format("MMMM");return m.a.createElement(m.a.Fragment,null,m.a.createElement("h3",null,"Users statistic for ",r),m.a.createElement(Qe.Bar,{width:1e3,data:{labels:a,values:n},labels:"flavor",values:"price"}))},Ze=function(e){function t(){var e,a;Object(M.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).state={},a.getData=function(){var e;return v.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.awrap(je());case 3:e=t.sent,a.setState({graphData:e}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("e",t.t0),X.a.error({message:t.t0.message||t.t0});case 11:case"end":return t.stop()}}),null,null,[[0,7]])},a}return Object(U.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state.graphData;return e?m.a.createElement(Ve,{data:e}):m.a.createElement(ne.a,{size:"large"})}}]),t}(i.Component),Xe=Object(Pe.a)("pk_test_Hj3OTNCo8z4DEKPfahhoI7E500LpGpNiBf"),et=function(){return m.a.createElement(Ge.Elements,{stripe:Xe},m.a.createElement(b.c,null,m.a.createElement(b.a,{path:"/balance",component:Ye}),m.a.createElement(b.a,{path:"/login",component:Te}),m.a.createElement(b.a,{path:"/register",component:We}),m.a.createElement(b.a,{path:"/users",component:Ze})))},tt=a(155),at=a.n(tt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(456),a(457);f.a.render(m.a.createElement((function(){var e=Object(i.useState)(!1),t=Object(h.a)(e,2),a=t[0],n=t[1],r=F().user;return Object(i.useEffect)((function(){v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.awrap(ke());case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:return e.prev=8,n(!0),e.finish(8);case 11:case"end":return e.stop()}}),null,null,[[0,5,8,11]])}),[]),a?m.a.createElement(Y,null,m.a.createElement(b.b,{history:Z},m.a.createElement(E.a,{className:at.a.layout},m.a.createElement(K,null),m.a.createElement(E.a,null,r&&m.a.createElement(Q,null),m.a.createElement(E.a.Content,{className:at.a.content},m.a.createElement(b.c,null,m.a.createElement(b.a,{path:"/admin",component:Be}),m.a.createElement(b.a,{path:"/",component:et})))),m.a.createElement(x,null)))):m.a.createElement(w,null)}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[231,1,2]]]);
//# sourceMappingURL=main.46ad4d91.chunk.js.map