(this["webpackJsonpwork7-client"]=this["webpackJsonpwork7-client"]||[]).push([[0],{148:function(e,t,a){e.exports={header:"styles_header__2dQfB",title:"styles_title__3N7E-"}},153:function(e,t,a){e.exports={layout:"styles_layout__SeFd3",content:"styles_content__o67Yr"}},200:function(e,t,a){e.exports={loading:"styles_loading__32rGI",Gradient:"styles_Gradient__1eYmy"}},206:function(e,t,a){e.exports={sidebar:"styles_sidebar__VtPxY"}},215:function(e,t,a){e.exports={btnGroup:"styles_btnGroup__1v8JK"}},218:function(e,t,a){e.exports={form:"styles_form__jnDsq"}},219:function(e,t,a){e.exports={form:"styles_form__2ZSSu"}},227:function(e,t,a){e.exports=a(453)},232:function(e,t,a){},452:function(e,t,a){},453:function(e,t,a){"use strict";a.r(t);var n,r,c,s,o,l,u,i=a(0),m=a.n(i),p=a(4),f=a.n(p),d=(a(232),a(9)),h=a.n(d),v=a(47),b=a(19),g=a(454),E=a(200),y=a.n(E),w=function(){return m.a.createElement("div",{className:y.a.loading},m.a.createElement("span",null,"Application is loading, please wait..."))},x=function(){return m.a.createElement(g.a.Footer,null,"Geekhub")},O=a(40),j=a(459),k=a(5),_=a(56),C=a(53),N=a(77),M=a(75),S=a(79),U=a(80),I=a(44),D=a(67),A=(a(166),a(12)),B=(a(223),a(203)),G=a.n(B),L=new(n=function(){function e(){Object(I.a)(this,e),Object(U.a)(this,"user",r,this),Object(U.a)(this,"setUser",c,this),Object(U.a)(this,"unserUser",s,this)}return Object(C.a)(e,[{key:"fullName",get:function(){return this.user?this.user.firstName+this.user.lastName:""}}]),e}(),r=Object(D.a)(n.prototype,"user",[A.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),c=Object(D.a)(n.prototype,"setUser",[A.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.user=t}}}),Object(D.a)(n.prototype,"fullName",[A.e],Object.getOwnPropertyDescriptor(n.prototype,"fullName"),n.prototype),s=Object(D.a)(n.prototype,"unserUser",[A.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.user=void 0}}}),n);Object(A.f)({enforceActions:"observed"});var P=G()({global:!0})((l=function e(){Object(I.a)(this,e),Object(U.a)(this,"user",u,this)},u=Object(D.a)(l.prototype,"user",[A.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return L}}),o=l))||o,z=(new P,Object(i.createContext)(new P)),F=function(){var e=Object(i.useContext)(z);if(!e)throw new Error("You have forgot to use StoreProvider, shame on you.");return e},Y=function(e){var t=e.children,a=F();return m.a.createElement(z.Provider,{value:a},t)},J=a(148),H=a.n(J),R=j.a.Title,W=function(){var e=F().user.user;return m.a.createElement(g.a.Header,{className:H.a.header},m.a.createElement(O.a,{to:"/"},m.a.createElement(k.a,{type:"file-image"})," GeekHub"),e?m.a.createElement(R,{type:"warning",className:H.a.title,level:4},e.firstName):m.a.createElement(O.a,{to:"/login"},m.a.createElement(_.a,{type:"primary",icon:"info-circle"},"Login")))},q=a(462),K=a(206),Q=a.n(K),T=function(){var e=F().user.user;return m.a.createElement(g.a.Sider,{collapsible:!0,className:Q.a.sidebar},m.a.createElement(q.a,{theme:"dark",mode:"inline"},m.a.createElement(q.a.Item,null,m.a.createElement(O.a,{to:"/users"},"Users")),!!e&&m.a.createElement(q.a.SubMenu,{key:"sub1",title:m.a.createElement("span",null,m.a.createElement(k.a,{type:"user"}),m.a.createElement("span",null,"Admin"))},m.a.createElement(q.a.Item,{key:"3"},m.a.createElement(O.a,{to:"/admin/users"},"Users")))))},V=a(28),Z=Object(V.a)(),$=a(456),X=a(455),ee=a(457),te=a(458),ae=a(209),ne=a(461),re=a(464),ce={style:{display:"none"}},se=function(e){var t=e.open,a=e.data,n=e.onClose;return m.a.createElement(ne.a,{visible:t,title:"Import data from a csv file...",okButtonProps:a?{onClick:n}:ce,cancelButtonProps:ce},a?m.a.createElement(re.a,{message:"Done",description:"Users have been imported.",type:"info"}):m.a.createElement(ae.a,{tip:"Loading..."},m.a.createElement(re.a,{message:"Please wait",description:"Users are importing.",type:"info"})))},oe=a(54),le=a(63),ue=a(94),ie=a(460),me=a(463),pe=a(222),fe=a(211),de=a.n(fe),he=a(119),ve=a.n(he),be="http://localhost:5000/",ge=de.a.create({baseURL:be,headers:ve.a.pickBy({Authorization:"Bearer "+localStorage.getItem("token")})}),Ee="/user";function ye(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(ge.post(Ee,e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}function we(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(ge.post("".concat(Ee,"/bulk/").concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}function xe(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.awrap(ge.get("".concat(Ee,"/info")));case 2:e=t.sent,L.setUser(e.data);case 4:case"end":return t.stop()}}))}function Oe(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.awrap(ge.get(Ee));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))}function je(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.awrap(ge.get("".concat(Ee,"/statistic")));case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))}function ke(e,t){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(ge.patch("".concat(Ee,"/").concat(e),t));case 2:return a=n.sent,n.abrupt("return",a.data);case 4:case"end":return n.stop()}}))}function _e(e){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(ge.delete("".concat(Ee,"/").concat(e)));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}function Ce(e,t){var a,n,r,c;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h.a.awrap(ge.post("".concat(Ee,"/login?email=").concat(e,"&password=").concat(t)));case 2:a=s.sent,n=a.data,r=n.token,c=Object(pe.a)(n,["token"]),localStorage.setItem("token",r),L.setUser(c),window.location.href="/";case 7:case"end":return s.stop()}}))}var Ne=ue.a.Option,Me=function(e){var t=e.edit,a=e.open,n=e.onClose,r=e.loadUsers,c=Object(i.useState)(t||{}),s=Object(v.a)(c,2),o=s[0],l=s[1];function u(e){var t=e.target,a=t.name,n=t.value;l(Object(le.a)({},o,Object(oe.a)({},a,n)))}return t&&t._id!==o._id&&l(t),!t&&o._id&&l({}),m.a.createElement(ne.a,{title:(t?"update ":"craete ")+"user",visible:a,onOk:function(){var e;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=X.a.loading({content:"Loading..."}),a.prev=1,!t){a.next=7;break}return a.next=5,h.a.awrap(ke(t._id,o));case 5:a.next=9;break;case 7:return a.next=9,h.a.awrap(ye(o));case 9:return a.next=11,h.a.awrap(r());case 11:n(),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(1),$.a.error({message:a.t0.message||a.t0});case 17:return a.prev=17,e(),X.a.success("Success!"),a.finish(17);case 21:case"end":return a.stop()}}),null,null,[[1,14,17,21]])},onCancel:n},m.a.createElement(ie.a,null,m.a.createElement(ie.a.Item,null,m.a.createElement(me.a,{name:"firstName",prefix:m.a.createElement(k.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"First name",value:o.firstName,onChange:u}),m.a.createElement(me.a,{name:"lastName",prefix:m.a.createElement(k.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Last name",value:o.lastName,onChange:u}),m.a.createElement(me.a,{name:"email",prefix:m.a.createElement(k.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email",value:o.email,onChange:u}),m.a.createElement(ue.a,{value:o.role||"user",onChange:function(e){return l(Object(le.a)({},o,{role:e}))}},m.a.createElement(Ne,{value:"user"},"User"),m.a.createElement(Ne,{value:"admin"},"Admin")))))},Se=a(215),Ue=a.n(Se),Ie=function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,modal:{open:!1},csvModal:{open:!1}},a.changeModal=function(e){var t=a.state.modal.open;a.setState({modal:{open:!t,user:e}})},a.changeCsvModal=function(e,t){a.setState({csvModal:{open:e,users:t}})},a.changeFile=function(e){var t,n,r,c;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(console.log("info",e),t=e.file,n=t.status,r=t.response,"uploading"===n&&a.changeCsvModal(!0),"done"!==n||!r){s.next=17;break}return s.prev=4,s.next=7,h.a.awrap(we(r));case 7:c=s.sent,a.changeCsvModal(!0,c),s.next=14;break;case 11:s.prev=11,s.t0=s.catch(4),$.a.error({message:s.t0.message});case 14:return s.prev=14,a.loadData(),s.finish(14);case 17:case"end":return s.stop()}}),null,null,[[4,11,14,17]])},a.deleteUser=function(e){return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.awrap(_e(e));case 3:a.loadData(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),$.a.error({message:t.t0.message});case 9:case"end":return t.stop()}}),null,null,[[0,6]])},a.loadData=function(){var e,t;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=X.a.loading({content:"Loading..."}),n.prev=1,n.next=4,h.a.awrap(Oe());case 4:t=n.sent,a.setState({users:t,loading:!1}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),$.a.error({message:n.t0.message||n.t0});case 11:return n.prev=11,e(),n.finish(11);case 14:case"end":return n.stop()}}),null,null,[[1,8,11,14]])},a}return Object(S.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.users,n=t.modal,r=t.csvModal;return m.a.createElement("div",null,m.a.createElement("div",{className:Ue.a.btnGroup},m.a.createElement(_.a,{icon:"plus",type:"primary",onClick:function(){return e.changeModal()}},"Add User"),m.a.createElement(ee.a,{multiple:!1,name:"file",action:"".concat(be,"file"),accept:".csv",onChange:this.changeFile},m.a.createElement(_.a,{icon:"upload"},"Import csv"))),m.a.createElement(te.a,{dataSource:a,renderItem:function(t){return m.a.createElement(te.a.Item,{key:t._id,actions:[m.a.createElement(k.a,{type:"edit",onClick:function(){return e.changeModal(t)}}),m.a.createElement(k.a,{type:"delete",onClick:function(){return e.deleteUser(t._id)}})]},m.a.createElement(te.a.Item.Meta,{title:m.a.createElement("p",null,t.fullName),description:t.email}))}},this.state.loading&&m.a.createElement(ae.a,null)),m.a.createElement(se,{open:r.open,data:r.users,onClose:function(){return e.changeCsvModal(!1)}}),m.a.createElement(Me,{loadUsers:this.loadData,open:n.open,edit:n.user,onClose:function(){return e.changeModal()}}))}}]),t}(i.Component),De=function(){return m.a.createElement(b.c,null,m.a.createElement(b.a,{path:"/admin/users",component:Ie}))},Ae=a(218),Be=a.n(Ae),Ge=function(){var e=Object(i.useState)({}),t=Object(v.a)(e,2),a=t[0],n=t[1];function r(e){var t=e.target,r=t.name,c=t.value;n(Object(le.a)({},a,Object(oe.a)({},r,c)))}return m.a.createElement(ie.a,{className:Be.a.form},m.a.createElement(ie.a.Item,null,m.a.createElement(me.a,{prefix:m.a.createElement(k.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username",name:"login",onChange:r})),m.a.createElement(ie.a.Item,null,m.a.createElement(me.a,{prefix:m.a.createElement(k.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",name:"password",placeholder:"Password",onChange:r})),m.a.createElement(ie.a.Item,null,m.a.createElement(_.a,{block:!0,onClick:function(){var e,t;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=a.login,t=a.password,e&&t){n.next=3;break}return n.abrupt("return");case 3:return n.prev=3,n.next=6,h.a.awrap(Ce(e,t));case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(3),$.a.error({message:"Not valid credentionals"});case 11:case"end":return n.stop()}}),null,null,[[3,8]])}},"Login"),"Or ",m.a.createElement(O.a,{to:"/register"},"register now!")))},Le=a(219),Pe=a.n(Le),ze=function(e){var t=Object(i.useState)({}),a=Object(v.a)(t,2),n=a[0],r=a[1],c=Object(i.useState)(!1),s=Object(v.a)(c,2),o=(s[0],s[1]);function l(e){var t=e.target,a=t.name,c=t.value;r(Object(le.a)({},n,Object(oe.a)({},a,c)))}return m.a.createElement(ie.a,{className:Pe.a.form},["firstName","lastName","email","password"].map((function(e){return m.a.createElement(ie.a.Item,null,m.a.createElement(me.a,{name:e,placeholder:ve.a.startCase(e),onChange:l}))})),m.a.createElement(ie.a.Item,null,m.a.createElement(_.a,{block:!0,onClick:function(){o(!0);try{!function(e){var t;h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(ge.post("".concat(Ee,"/register"),e));case 2:return t=a.sent,a.abrupt("return",t.data);case 4:case"end":return a.stop()}}))}(n),e.history.push("/login")}catch(t){$.a.error({message:t.message})}finally{o(!1)}}},"Register"),"Or ",m.a.createElement(O.a,{to:"/login"},"Login!")))},Fe=a(92),Ye=a.n(Fe),Je=a(220),He=function(e){var t=e.data,a=t.map((function(e){return e.day})),n=t.map((function(e){return e.count})),r=Ye()().format("MMMM");return m.a.createElement(m.a.Fragment,null,m.a.createElement("h3",null,"Users statistic for ",r),m.a.createElement(Je.Bar,{width:1e3,data:{labels:a,values:n},labels:"flavor",values:"price"}))},Re=function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(N.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(r)))).state={},a.getData=function(){var e;return h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.awrap(je());case 3:e=t.sent,a.setState({graphData:e}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("e",t.t0),$.a.error({message:t.t0.message||t.t0});case 11:case"end":return t.stop()}}),null,null,[[0,7]])},a}return Object(S.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state.graphData;return e?m.a.createElement(He,{data:e}):m.a.createElement(ae.a,{size:"large"})}}]),t}(i.Component),We=function(){return m.a.createElement(b.c,null,m.a.createElement(b.a,{path:"/login",component:Ge}),m.a.createElement(b.a,{path:"/register",component:ze}),m.a.createElement(b.a,{path:"/users",component:Re}))},qe=a(153),Ke=a.n(qe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(451),a(452);f.a.render(m.a.createElement((function(){var e=Object(i.useState)(!1),t=Object(v.a)(e,2),a=t[0],n=t[1],r=F().user;return Object(i.useEffect)((function(){h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.awrap(xe());case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:return e.prev=8,n(!0),e.finish(8);case 11:case"end":return e.stop()}}),null,null,[[0,5,8,11]])}),[]),a?m.a.createElement(Y,null,m.a.createElement(b.b,{history:Z},m.a.createElement(g.a,{className:Ke.a.layout},m.a.createElement(W,null),m.a.createElement(g.a,null,r&&m.a.createElement(T,null),m.a.createElement(g.a.Content,{className:Ke.a.content},m.a.createElement(b.c,null,m.a.createElement(b.a,{path:"/admin",component:De}),m.a.createElement(b.a,{path:"/",component:We})))),m.a.createElement(x,null)))):m.a.createElement(w,null)}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[227,1,2]]]);
//# sourceMappingURL=main.12a90b2f.chunk.js.map